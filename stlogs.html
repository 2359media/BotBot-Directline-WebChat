<html>

<head>
  <title>STLogs</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.16/vue.min.js"></script>
  <link href="./form.css" rel="stylesheet">
</head>

<body>
  <main id="app">
    <div class="notifications" v-if="notifications && notifications.length > 0">
      <template v-for="(item, index) in notifications">
        <span :class="[item.type, 'noti-item']">
          <svg v-if="item.type === 'success'" class="icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
            width="20" height="20" viewBox="0 0 20 20">
            <path fill="#000000" d="M9.5 20c-2.538 0-4.923-0.988-6.718-2.782s-2.782-4.18-2.782-6.717c0-2.538 0.988-4.923 2.782-6.718s4.18-2.783 6.718-2.783c2.538 0 4.923 0.988 6.718 2.783s2.782 4.18 2.782 6.718-0.988 4.923-2.782 6.717c-1.794 1.794-4.18 2.782-6.718 2.782zM9.5 2c-4.687 0-8.5 3.813-8.5 8.5s3.813 8.5 8.5 8.5 8.5-3.813 8.5-8.5-3.813-8.5-8.5-8.5z"></path>
            <path fill="#000000" d="M7.5 14.5c-0.128 0-0.256-0.049-0.354-0.146l-3-3c-0.195-0.195-0.195-0.512 0-0.707s0.512-0.195 0.707 0l2.646 2.646 6.646-6.646c0.195-0.195 0.512-0.195 0.707 0s0.195 0.512 0 0.707l-7 7c-0.098 0.098-0.226 0.146-0.354 0.146z"></path>
          </svg>
          <svg v-if="(item.type === 'error')" class="icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
            width="20" height="20" viewBox="0 0 20 20">
            <path fill="#000000" d="M14.332 14.126l-4.080-3.626 4.080-3.626c0.206-0.183 0.225-0.499 0.042-0.706s-0.499-0.225-0.706-0.042l-4.168 3.705-4.168-3.705c-0.206-0.183-0.522-0.165-0.706 0.042s-0.165 0.522 0.042 0.706l4.080 3.626-4.080 3.626c-0.206 0.183-0.225 0.499-0.042 0.706 0.099 0.111 0.236 0.168 0.374 0.168 0.118 0 0.237-0.042 0.332-0.126l4.168-3.705 4.168 3.705c0.095 0.085 0.214 0.126 0.332 0.126 0.138 0 0.275-0.057 0.374-0.168 0.183-0.206 0.165-0.522-0.042-0.706z"></path>
            <path fill="#000000" d="M9.5 20c-2.538 0-4.923-0.988-6.718-2.782s-2.782-4.18-2.782-6.717c0-2.538 0.988-4.923 2.782-6.718s4.18-2.783 6.718-2.783c2.538 0 4.923 0.988 6.718 2.783s2.782 4.18 2.782 6.718-0.988 4.923-2.782 6.717c-1.794 1.794-4.18 2.782-6.718 2.782zM9.5 2c-4.687 0-8.5 3.813-8.5 8.5s3.813 8.5 8.5 8.5 8.5-3.813 8.5-8.5-3.813-8.5-8.5-8.5z"></path>
          </svg>
          <span>{{item.message}}</span>
          <button @click="removeNotification(index)" class="close">
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="20" viewBox="0 0 20 20">
              <path fill="#333" d="M10.707 10.5l5.646-5.646c0.195-0.195 0.195-0.512 0-0.707s-0.512-0.195-0.707 0l-5.646 5.646-5.646-5.646c-0.195-0.195-0.512-0.195-0.707 0s-0.195 0.512 0 0.707l5.646 5.646-5.646 5.646c-0.195 0.195-0.195 0.512 0 0.707 0.098 0.098 0.226 0.146 0.354 0.146s0.256-0.049 0.354-0.146l5.646-5.646 5.646 5.646c0.098 0.098 0.226 0.146 0.354 0.146s0.256-0.049 0.354-0.146c0.195-0.195 0.195-0.512 0-0.707l-5.646-5.646z"></path>
            </svg>
          </button>
        </span>
      </template>
    </div>
    <section v-if="!user.loggedin" class="login-form-wrapper js-login-form-wrapper">
      <form @submit.prevent="login" class="login-form js-login-form">
        <img src="./avatar.png" class="wc-login-avatar">
        <h1>Login</h1>
        <p class="form-group">
          <label for="username">Username</label>
          <input type="text" autocomplete="off" v-bind:disabled="user.logining" required id="username" v-model="user.username" name="username"
            placeholder="Enter username...">
        </p>
        <p class="form-group">
          <label for="login-password">Password</label>
          <input type="password" v-bind:disabled="user.logining" required v-model="user.password" id="login-password" value="ISPM2017!!"
            name="password" placeholder="Enter your password...">
        </p>
        <div class="actions">
          <button class="btn-primary" type="submit" v-bind:disabled="user.logining">{{ loginBtnText }}</button>
        </div>
      </form>
    </section>

    <div v-else class="container">
      <div class="page-title">
        <h1>STLogs</h1>
        <div class="account-info">
          <p>Welcome, {{user.name}}</p>
          <button @click="logout">Logout</button>
        </div>
      </div>
      <ul class="tab-buttons">
        <li>
          <button v-bind:class="{ active: operationTabActive }" @click="showOperation">Today Ops & Next Day Highlights</button>
        </li>
        <li>
          <button v-bind:class="{ active: manpowerTabActive }" @click="showManpower">Manpower</button>
        </li>
      </ul>
      <p v-if="filledTimeStr" class="text-muted" style="text-align: right; color: #9e9e9e;"><em>{{filledTimeStr}}</em></p>
      <!-- TODAY OPERATIONS FORMS -->
      <div v-if="operationTabActive">
        <!-- AVIVATION FORM -->
        <div v-if="isAvivation">
          <h2>Aviation/Freight</h2>
          <form id="today_aviation" class="form-wrapper form-2-col" @submit.prevent="doAvivationOperationSubmit">
            <div class="block" v-for="block in aviationOperation.fields">
              <h3>{{block.heading}}</h3>

              <fieldset v-for="item in block.groups" v-if="item.title">
                <legend>{{item.title}}</legend>
                <p v-for="field in item.fields" class="form-group">
                  <label :class="field.required ? 'required' : ''">{{field.label}}</label>
                  <input type="text" autocomplete="off" v-model="aviationOperation.model[field.name]" :name="field.name" :required="field.required" :disabled="field.disabled" />
                </p>
              </fieldset>
              <p v-for="item in block.groups" v-if="!item.title" class="form-group">
                <label :class="item.required ? 'required' : ''">{{item.label}}</label>
                <input type="text" autocomplete="off" v-model="aviationOperation.model[item.name]" :name="item.name" :required="item.required" :disabled="item.disabled" />
              </p>
            </div>

            <div class="actions">
              <button :disabled="aviationOperation.submitting" class="btn-primary" type="submit">{{aviationOperationFormSubmitText}}</button>
            </div>
          </form>
        </div>
        <!-- END OF AVIVATION FORM -->
        <!-- DEFENCE FORM -->
        <div v-if="isDefence">
          <h2>Defence</h2>
          <form action="" class="form-wrapper" @submit.prevent="doDefenceOperationSubmit">
            <template v-for="block in defenceOperation.fields">
              <h3>{{block.heading}}</h3>

              <fieldset v-for="item in block.groups" v-if="item.title">
                <legend>{{item.title}}</legend>
                <p v-for="field in item.fields" class="form-group">
                  <label :class="field.required ? 'required' : ''">{{field.label}}</label>
                  <input type="text" autocomplete="off" v-model="defenceOperation.model[field.name]" :name="field.name" :required="field.required" :disabled="field.disabled" />
                </p>
              </fieldset>
              <p v-for="item in block.groups" v-if="!item.title" class="form-group">
                <label :class="item.required ? 'required' : ''">{{item.label}}</label>
                <input type="text" autocomplete="off" v-model="defenceOperation.model[item.name]" :name="item.name" :required="item.required" :disabled="item.disabled" />
              </p>
            </template>

            <div class="actions">
              <button :disabled="defenceOperation.submitting" class="btn-primary" type="submit">{{defenceOperationFormSubmitText}}</button>
            </div>
          </form>
        </div>
        <!-- END OF DEFENCE FORM -->
        <!-- HEALTHCATE FORM -->
        <div v-if="isHealthcare">
          <h2>Healthcare</h2>
          <form action="" class="form-wrapper" @submit.prevent="doHealthcareOperationSubmit">
            <template v-for="block in healthcareOperation.fields">
              <h3>{{block.heading}}</h3>

              <fieldset v-for="item in block.groups" v-if="item.title">
                <legend>{{item.title}}</legend>
                <p v-for="field in item.fields" class="form-group">
                  <label :class="field.required ? 'required' : ''">{{field.label}}</label>
                  <input type="text" autocomplete="off" v-model="healthcareOperation.model[field.name]" :name="field.name" :required="field.required" :disabled="field.disabled" />
                </p>
              </fieldset>
              <p v-for="item in block.groups" v-if="!item.title" class="form-group">
                <label :class="item.required ? 'required' : ''">{{item.label}}</label>
                <input type="text" autocomplete="off" v-model="healthcareOperation.model[item.name]" :name="item.name" :required="item.required" :disabled="item.disabled" />
              </p>
            </template>

            <div class="actions">
              <button :disabled="healthcareOperation.submitting" class="btn-primary" type="submit">{{healthcareOperationFormSubmitText}}</button>
            </div>
          </form>
        </div>
        <!-- END OF HEALTHCATE FORM -->
        <!-- PSS FORM -->
        <div v-if="isPSS">
          <h2>PSS</h2>
          <form action="" class="form-wrapper" @submit.prevent="doPssOperationSubmit">
            <div class="block" v-for="block in pssOperation.fields">
              <h3>{{block.heading}}</h3>

              <fieldset v-for="item in block.groups" v-if="item.title">
                <legend>{{item.title}}</legend>
                <p v-for="field in item.fields" class="form-group">
                  <label :class="field.required ? 'required' : ''">{{field.label}}</label>
                  <input type="text" autocomplete="off" v-model="pssOperation.model[field.name]" :name="field.name" :required="field.required" :disabled="field.disabled" />
                </p>
              </fieldset>
              <p v-for="item in block.groups" v-if="!item.title" class="form-group">
                <label :class="item.required ? 'required' : ''">{{item.label}}</label>
                <input type="text" autocomplete="off" v-model="pssOperation.model[item.name]" :name="item.name" :required="item.required" :disabled="item.disabled" />
              </p>
            </div>

            <div class="actions">
              <button :disabled="pssOperation.submitting" class="btn-primary" type="submit">{{pssOperationFormSubmitText}}</button>
            </div>
          </form>
        </div>
        <!-- END OF PSS FORM -->
      </div>
      <!-- END TODAY OPERATIONS FORMS -->
      <!-- MAINPOWER FORM -->
      <div v-if="manpowerTabActive">
        <!-- MANPOWER AVIVATION FORM -->
        <div v-if="isAvivation">
          <!-- <h2>Manpower Status - Aviation</h2> -->
          <form class="form-wrapper" @submit.prevent="doAvivationManpowerSubmit">
            <template v-for="block in aviationManpower.fields">
              <h2>{{block.heading}}</h2>

              <p v-for="item in block.groups" class="form-group">
                <label :class="item.required ? 'required' : ''">{{item.label}}</label>
                <input :type="item.type ? item.type : 'text'" autocomplete="off" v-model="aviationManpower.model[item.name]" :name="item.name" :required="item.required" :disabled="checkAviationDisabled(item)" />
              </p>
            </template>

            <template v-for="block in aviationRedcon.fields">
              <h2>{{block.heading}}</h2>

              <p v-for="item in block.groups" class="form-group">
                <label :class="item.required ? 'required' : ''">{{item.label}}</label>
                <input :type="item.type ? item.type : 'text'" autocomplete="off" v-model="aviationRedcon.model[item.name]" :name="item.name" :required="item.required" :disabled="checkAviationDisabled(item)" />
              </p>
            </template>
            
            <div class="actions">
              <button :disabled="aviationManpower.submitting" class="btn-primary" type="submit">{{aviationManpowerFormSubmitText}}</button>
            </div>
          </form>
        </div>
        <!-- END OF MANPOWER AVIVATION FORM -->
        <!-- MANPOWER STATUS - DEFENCE, PSS, HEALTHCARE FORM -->
        <div v-if="isDefence || isHealthcare || isPSS">
          <form class="form-wrapper" @submit.prevent="doDefenceManpowerSubmit">
            <template v-for="block in defenceManpower.fields">
              <h2>{{block.heading}}</h2>

              <p v-for="item in block.groups" class="form-group">
                <label :class="item.required ? 'required' : ''">{{item.label}}</label>
                <input :type="item.type ? item.type : 'text'" autocomplete="off" v-model="defenceManpower.model[item.name]" :name="item.name" :required="item.required" :disabled="checkDefencesDisabled(item)" />
              </p>
            </template>

            <template v-for="block in defenceRedcon.fields">
              <h2>{{block.heading}}</h2>

              <p v-for="item in block.groups" class="form-group">
                <label :class="item.required ? 'required' : ''">{{item.label}}</label>
                <input :type="item.type ? item.type : 'text'" autocomplete="off" v-model="defenceRedcon.model[item.name]" :name="item.name" :required="item.required" :disabled="checkDefencesDisabled(item)" />
              </p>
            </template>

            <div class="actions">
              <button :disabled="defenceManpower.submitting" class="btn-primary" type="submit">{{defenceManpowerFormSubmitText}}</button>
            </div>
          </form>

        </div>
        <!-- END OF MANPOWER STATUS - DEFENCE, PSS, HEALTHCARE FORM -->
      </div>
      <!-- END MANPOWER FORMS -->
      <br>
    </div>

  </main>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.min.js"></script>

  <script src="./stlogs-forms.min.js"></script>
</body>

</html>
