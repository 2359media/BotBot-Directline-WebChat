<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <title>Bot Chat</title>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
    <style>
        html,
        body {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
    </style>
    <link href="./botchat.css" rel="stylesheet" />
    <link href="./botchat-fullwindow.css" rel="stylesheet" />
</head>

<body>
    <div id="BotChatWindow"></div>
    <script src="./botchat.js"></script>
    <script>
        function uuidv4() {
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
                var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
                return v.toString(16);
            });
        }

        function getAppProps() {
            var params = BotChat.queryParams(location.search);

            var user = {
                id: params['userid'] || uuidv4(),
                name: params['username'] || 'user'
            };

            var bot = {
                id: params['botid'] || 'botid',
                name: params['botname'] || 'botname'
            };

            return {
                directLine: {
                    // anh Nick thay directline secret o day ne
                    secret: 'apThmtE5X9w.cwA.Rh8.S11jhfB7O3Bj_IYY3fuQ0oID6P1jJXp0NpQDnXoraz0',
                    token: params['t'],
                    domain: params['domain'],
                    webSocket: params['webSocket'] && params['webSocket'] === 'true'
                },
                user: user,
                bot: bot,
                locale: params['locale'],
                resize: 'window'
                // sendTyping: true,    // defaults to false. set to true to send 'typing' activities to bot (and other users) when user is typing
            };
        }

        BotChat.App(getAppProps(), document.getElementById("BotChatWindow"));
    </script>
</body>

</html>
